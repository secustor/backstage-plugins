{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:best-practices",
    ":semanticCommitTypeAll(fix)",
    "github>secustor/backstage-renovate-config",
  ],
  addLabels: ["renovate"],
  gitIgnoredAuthors: ["renovate@poxhofer.at"],
  packageRules: [
    {
      matchFileNames: ["plugins/**"],
      rangeStrategy: "replace",
    },
    {
      matchDatasources: ["npm"],
      minimumReleaseAge: "3 days",
      matchDepNames: ["!renovate"],
    },
    {
      matchManagers: ["npm"],
      automerge: true,
      matchPackageNames: ["@types/{/,}**"],
    },
    {
      matchDepTypes: ["devDependencies"],
      matchManagers: ["npm"],
      automerge: true,
    },
    {
      matchManagers: ["custom.regex", "docker-compose", "dockerfile"],
      pinDigests: false,
    },
  ],
  customManagers: [
    {
      customType: "regex",
      fileMatch: "backstage\\.json$",
      matchStrings: ['"version":\\s*"(?<currentValue>[^"]+)'],
      depNameTemplate: "backstage/backstage",
      datasourceTemplate: "github-releases",
      versioningTemplate: "semver-coerced",
    },
    {
      customType: "regex",
      fileMatch: "^plugins/renovate-backend-module-runtime-docker/.*",
      matchStrings: [
        "tag:\\s+latest\\s+#\\s*default:\\s*(?<currentValue>\\S+)",
        "imageTag\\s*=\\s*'(?<currentValue>\\S*?)'",
        "Default:\\s*'(?<currentValue>[\\.\\d]*?)'",
      ],
      depNameTemplate: "renovate",
      packageNameTemplate: "ghcr.io/renovatebot/renovate",
      datasourceTemplate: "docker",
    },
  ],
}
